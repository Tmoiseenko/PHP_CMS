# PHP_CMS
Необходимо разработать личный сайт-блог, на котором любой желающий может зарегистрироваться и оставить комментарии к любой записи в блоге и подписаться на получение уведомлений о новой статье в блоге. Внешний вид страницы вы определяете самостоятельно, но используя framework bootstrap v4.


### Структура Сайта
Страницы на сайте:

- главная (она же список статей);
- детальная страница статьи блога;
- авторизация;
- регистрация;
- ЛК зарегистрированного пользователя, профиль и подписки;
- другие статичные страницы, создаваемые с помощью CMS;
- админка CMS.

### Роли на сайте
У администраторов сайта должна быть возможность выдавать зарегистрированным пользователям роли Администратора и Контент-менеджера.

Роли пользователей:

Администратор – полный доступ к админке;

Контент менеджер – может изменять/создавать статьи и модерирует комментарии к ним;

Зарегистрированный пользователь – может оставлять комментарии;

Незарегистрированный пользователь – может просматривать статьи в блоге, подписаться, авторизоваться и зарегистрироваться.


### Состав страниц
Шапка сайта состоит из Названия сайта, меню пользователя и меню для навигации по сайту.

Меню пользователя содержит ссылки на авторизацию регистрации (если пользователь не авторизован) и ссылки на профиль в ЛК (если он авторизован).


### Главная страница (список статей)
Список статей блога выводится по убыванию даты создания. Для каждой статьи выводятся: название, краткое описание, картинка и дата публикации. На странице выводится ограниченное количество элементов, которое можно изменить в административном интерфейсе. В случае, если статей больше, то появляется постраничная навигация. Блок подписать с полем email (для неавторизованного пользователя) и без этого поля (для авторизованного пользователя), если он еще не подписан.


### Детальная страница статьи
Выводится название, картинка, дата публикации и полное содержание статьи. После статьи выводятся комментарии к ней и форма добавления нового комментария. Оставить комментарий может только авторизованный пользователь, неавторизованному при попытке добавить комментарий должно быть показано сообщение об ошибке и предложение авторизоваться. Добавленный комментарий отображается только автору и модераторам, с пометкой, что комментарий еще не утвержден. Модераторы имеют права на подтверждение комментария или его отклонения. Если комментарий добавляется Контент-менеджером или Администратором, то он сразу помечается как промодерированный и отображается всем. Каждый комментарий содержит аватарку и ФИО автора, дату публикации и сам комментарий.


### Страница Авторизации
Отображается форма авторизации с полями email и пароль. Также под формой отображается ссылка на регистрацию. При ошибке авторизации эта ошибка должна быть отображена.


### Страница Регистрации
Отображается форма регистрации с полями имя, email, пароль и подтверждение пароля, а также с галочкой “согласен с правилами сайта” и ссылкой на эти правила. Все поля обязательны к заполнению. Под формой отображается ссылка на авторизацию. При ошибке регистрации эта ошибка должна быть отображена рядом с полем, к которому ошибка относится. После регистрации пользователь автоматически авторизуется.



### Страница Профиля
Отображается форма профиля. Помимо полей с регистрацией, пользователь может загрузить аватар (только изображение, размером не более 2 Мб) и написать текст “О себе – эти поля не обязательны. При ошибке сохранения, ошибки должны быть отображены рядом с полем, к которому они относятся.

Также здесь отображается блок “Подписаться” или “Отписаться”, если пользователь уже подписан.


### Статичные страницы
Создаются в админке, на них отображается контент, указанный при создании страницы.



### Статичная страница с правилами пользования сайтом
Должна быть создана статическая страница, на которой отображаются правила пользования сайтом.

### Административный раздел
Содержит интерфейс по управлению пользователями и их ролями, интерфейс управления статьями, управления подписками, управления комментариями и интерфейс управления статичными страницами, а также отдельную страницу с дополнительными настройками. При этом в административном разделе должно быть меню для быстрой навигации между подразделами. Списки данных выводятся на страницах с постраничной навигацией, количество элементов на странице задается GET-параметром. Для его изменения используется select с вариантами 10, 20, 50, 200, все. По умолчанию: 20.

Пользователи уровня Контент-менеджер могут заходить в административный интерфейс и полностью управлять только разделами статей, комментариями и статичными страницами. Доступ к остальным разделам должен быть закрыт.

### Подписка на обновления
Любой пользователь может подписать свой email на получение уведомлений о появлении новой статьи на сайте. Блок “Подписаться” содержит поле email (для неавторизованного пользователя) и кнопку “Подписаться”. При нажатии на кнопку, указанный email добавляется в список рассылок. Для авторизованного пользователя поле email скрывается и подставляется автоматически его email.

Если пользователь уже подписан, то блок не отображается.

Отменить подписку можно в настройках в ЛК, а также по специально сформированной ссылке в письме рассылке.

### Рассылка
При добавлении новой статьи, на сайте всем пользователям, подписанным на рассылку, отправляется (реальную отправку делать не нужно, текст письма пишется в лог с указанием времени отправки и адресата) email-уведомление. Содержимое уведомления:

Заголовок письма: На сайте добавлена новая запись: “#Название новой статьи#”

Содержимое письма:

Новая статья: “#Название новой статьи#”,

#Краткое описание статьи#

Читать (ссылка на страницу со статьей)

-------

Отписаться от рассылки (ссылка для того, чтобы отписаться от рассылки)
